function throttle(e,t){var i=null;return function(){var s=this,a=arguments;clearTimeout(i),i=window.setTimeout(function(){e.apply(s,a)},t||100)}}function gbifSearch(e,t){var s="search?kingdom=Plantae&q="+e+"&rank="+t+"&status=ACCEPTED";ajaxHelper(gbifUri+s,"GET","jsonp").done(function(e){console.log(e);"there are "+e.count+" results!";for($("#gbif-results").empty(),i=0;i<e.results.length;i++){var t="None Registered";if(e.results[i].vernacularNames.length>0)for(j=0;j<e.results[i].vernacularNames.length;j++)(e.results[i].vernacularNames[j].language="eng")&&(t=e.results[i].vernacularNames[j].vernacularName);var s="";e.results[i].descriptions.length>0&&(s=e.results[i].descriptions[0].description.substring(0,200)+"..."),$("#gbif-results").append('<div class="list-group-item"><h4 class="list-group-item-heading"><strong>'+e.results[i].canonicalName+"</strong> ("+e.results[i].key+")</h4><label>Common Name:</label><span> "+t+'</span><p class="list-group-item-text">'+s+"</p></div>")}})}function ajaxHelper(e,t,i,s){return $.ajax({type:t,url:e,dataType:i,contentType:"application/json",data:s?JSON.stringify(s):null}).fail(function(e,t,i){console.log(i)})}$(document).ready(throttle(function(){$("#gbif-search").keyup(function(){var e=$.trim(this.value);if(e.length>2){gbifSearch(e,"species")}}),$("#gbif-results").click(function(){console.log($(this)),alert("Clicked list."+$(this).value)})}));var gbifUri="http://api.gbif.org/v1/species/";